name: EthicalCheck â€“ Analyse API et crÃ©ation produit

on:
  push:
    branches:
      - main

jobs:
  ethicalcheck:
    runs-on: ubuntu-latest

    steps:
      - name: âœ… Checkout du dÃ©pÃ´t
        uses: actions/checkout@v4

      - name: ðŸ“¡ Appel Ã  l'API EthicalCheck
        run: |
          curl -X POST https://ethicalcheck.dev/api/check \
          -H "Content-Type: application/json" \
          -d '{"url": "https://blackbird-mhwe.onrender.com/api/customers/request-data"}'

      - name: ðŸ› ï¸ CrÃ©ation du produit
        run: |
          node createProduct.js

      - name: ðŸ“„ GÃ©nÃ©ration du rapport SARIF
        run: |
          echo '{
            "version": "2.1.0",
            "runs": []
          }' > ethicalcheck.sarif.json

      - name: ðŸ“¤ Upload du rapport SARIF
        uses: github/codeql-action/upload-sarif@v3
        with:
          sarif_file: ethicalcheck.sarif.json






